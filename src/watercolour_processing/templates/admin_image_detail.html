{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <h4 class="m-0">Image Detail (ID: {{ image_id }})</h4>
  <!-- Link back to listing preserving the filters/pages -->
  <a class="btn btn-sm btn-secondary"
     href="{{ url_for('admin_list_images',
                      filename=request.args.get('filename',''),
                      date_from=request.args.get('date_from',''),
                      date_to=request.args.get('date_to',''),
                      page=request.args.get('page',1),
                      per_page=request.args.get('per_page',20)) }}">
    Back to Image List
  </a>
</div>

{% if row and col_names %}
  <div class="mb-3">
    <img src="{{ url_for('admin_thumbnail', image_id=row[0]) }}"
         alt="thumbnail"
         class="img-fluid img-thumbnail"
         style="max-width: 300px;" />
  </div>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Column</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      {% for col_name in col_names %}
      <tr>
        <td>{{ col_name }}</td>
        <td>{{ row[loop.index0] }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <div class="alert alert-warning">No data found for this image.</div>
{% endif %}

<div class="mt-3">
  <a class="btn btn-secondary" href="{{ url_for('admin_dashboard') }}">Back to Admin</a>
</div>

{% endblock %}
